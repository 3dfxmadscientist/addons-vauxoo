<?xml version="1.0" ?>
<openerp>
    <data>
        <record model="ir.ui.view" id="view_crossovered_budget_line_form">
            <field name="name">crossovered.budget.line.form.inherit</field>
            <field name="model">crossovered.budget.lines</field>
            <field name="inherit_id" ref="account_budget.view_crossovered_budget_line_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='theoritical_amount']" position="after">
                    <field name="period_id"/>
                    <field name="ifrs_lines_id"/>
                    <field name="practical_amount_aa"/>
                    <field name="forecasted_amount"/>
                </xpath>
            </field>
        </record>
       <record id="account_budget.view_crossovered_budget_line_search" model="ir.ui.view">
            <field name="name">account.budget.line.search</field>
            <field name="model">crossovered.budget.lines</field>
            <field name="arch" type="xml">
                <search string="Budget Lines">
                    <field name="analytic_account_id"/>
                    <field name="ifrs_lines_id"/>
                    <field name="analytic_account_id"/>
                    <field name="period_id"/>
                    <field name="practical_amount_aa"/>
                    <field name="forecasted_amount"/>
                    <field name="crossovered_budget_id"/>
                    <field name="general_budget_id"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="paid_date"/>
                    <field name="planned_amount"/>
                    <field name="practical_amount"/>
                    <field name="theoritical_amount"/>
                    <field name="percentage"/>
                    <field name="company_id"/>
                    <group expand="1" string="Group By...">
                        <filter string="IFRS Reporti Line" icon="terp-project" domain="[]" context="{'group_by':'ifrs_lines_id'}"/>    
                        <filter string="Budgetary Position" icon="terp-project" domain="[]" context="{'group_by':'general_budget_id'}"/>    
                        <filter string="Analytic Account" icon="terp-project" domain="[]" context="{'group_by':'analytic_account_id'}"/>    
                        <filter string="Period" icon="terp-project" domain="[]" context="{'group_by':'period_id'}"/>    
                        <filter string="Company" icon="terp-project" domain="[]" context="{'group_by':'company_id'}"/>    
                    </group>
                </search>
            </field>
        </record>
        <record model="ir.ui.view" id="crossovered_budget_line_view_kanban">
            <field name="name">crossovered.budget.line.kanban.inherit</field>
            <field name="model">crossovered.budget.lines</field>
            <field name="arch" type="xml">
                <kanban default_group_by="period_id"  quick_create="false" create="true">
                    <field name="analytic_account_id"/>
                    <field name="period_id"/>
                    <field name="practical_amount_aa"/>
                    <field name="forecasted_amount"/>
                    <field name="crossovered_budget_id"/>
                    <field name="general_budget_id"/>
                    <field name="ifrs_lines_id"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="paid_date"/>
                    <field name="planned_amount"/>
                    <field name="practical_amount"/>
                    <field name="theoritical_amount"/>
                    <field name="percentage"/>
                    <field name="company_id" widget="selection" groups="base.group_multi_company"/>
                    <templates>
                        <div t-name="kanban-box" class="oe_kanban_content oe_kanban_card oe_budget">
                            <h4 class="oe_right"><field name="company_id"/></h4>
                            <a type="open" target="_NEW">
                                <h4 class="oe_right"><field name="crossovered_budget_id"/></h4>
                            </a>
                            <table class="oe_list_content table table-bordered">
                                <thead>
                                <tr> <td>BP</td> </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td><field name="planned_amount"/></td>
                                </tr>
                                </tbody>
                            </table>
                            <table class="oe_kanban_global_click_edit oe_list_content table table-bordered">
                                <thead>
                                <tr> <td>REAL</td> <td>FC</td> </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td><field name="practical_amount_aa"/></td>
                                    <td><field name="forecasted_amount"/></td>
                                </tr>
                                </tbody>
                            </table>
                            <table class="oe_list_content table table-bordered">
                                <thead>
                                <tr><td>THEO</td><td class="oe_e">A</td></tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><field name="theoritical_amount"/></td> 
                                        <td><field name="percentage"/></td>
                                    </tr>
                                </tbody>
                            </table>
                            <a href="http://google.com" t-att-title="record.analytic_account_id.raw_value[1]"><t t-raw="kanban_name_resumed(record.analytic_account_id)"></t></a>
                            <span class="oe_budget_hidden"><field name="analytic_account_id" groups="analytic.group_analytic_accounting"/></span>
                            <span class="oe_budget_hidden"><field name="ifrs_lines_id" groups="analytic.group_analytic_accounting"/></span>
                            <span class="oe_e oe_inline">N</span>
                            <field name="paid_date" class="oe_inline"/>
                            <h5><field name="general_budget_id"/></h5>
                        </div>
                    </templates>
                </kanban>
            </field>
        </record>
        <record model="ir.actions.act_window" id="account_budget.act_crossovered_budget_lines_view">
            <field name="name">Budget Lines</field>
            <field name="res_model">crossovered.budget.lines</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="view_id" ref="crossovered_budget_line_view_kanban"/>
        </record>
    </data>
</openerp>

