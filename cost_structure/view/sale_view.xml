<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>
   <record model="ir.ui.view" id="sale_view_order_method_cost">
      <field name="name">sale_view_order_method_cost</field>
      <field name="model">sale.order</field>
      <field name="inherit_id" ref="sale.view_order_form" />
      <field name="type">form</field>
      <field name="arch" type="xml">
          /form/sheet/notebook/page[@string="Order Lines"]/field[@name="order_line"]/tree[@string="Sales Order Lines"]/ 
          <xpath expr='/form/sheet/notebook/page[@string="Order Lines"]/field[@name="order_line"]/tree[@string="Sales Order Lines"]/field[@name="product_id"]' position="replace">
              <field name="product_id" context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'shop':parent.shop_id, 'uom':product_uom}"  groups="base.group_user" on_change="product_id_change(parent.pricelist_id, product_id, product_uom_qty, product_uom, product_uos_qty, product_uos, name, parent.partner_id, False, True, parent.date_order, False, parent.fiscal_position, False, context)"/>

          
          </xpath>
    
    
          <xpath expr='/form/sheet/notebook/page[@string="Order Lines"]/field[@name="order_line"]/tree[@string="Sales Order Lines"]/field[@name="product_uom_qty"]' position="replace">
              <field context="{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'shop':parent.shop_id, 'uom':product_uom}"
                     name="product_uom_qty" class="oe_inline" on_change="product_id_change(parent.pricelist_id,product_id,product_uom_qty,product_uom,product_uos_qty,product_uos,name,parent.partner_id, False, False, parent.date_order, False, parent.fiscal_position, True, context)"/>

        </xpath>
        <xpath expr='/form/sheet/notebook/page[@string="Order Lines"]/field[@name="order_line"]/tree[@string="Sales Order Lines"]/field[@name="product_uom_qty"]' position="after">
          
          <field name="cost_structure_id" invisible="1" />
          <field name="price_structure_id" domain="[('cost_structure_id','=',cost_structure_id)]" on_change="price_unit(price_structure_id,product_uom,product_uom_qty)" />
<!--
          TODO: <field name="cost_structure_id" domain="[('product_id','=',product_id)]" widget="selection" />
-->
        </xpath>
        
        
        <xpath expr='//field[@name="order_line"]' position="before">
          <group colspan="9" col="9">
         
         
          <field name="status_price" attrs="{'invisible': [('status_bool', '=', False)]}" nolabel="1" />
          <field name="status_bool" invisible="1" />
          
          </group>
          
        </xpath>
        
        
        
        
      </field>
    </record>
  </data>
</openerp>
