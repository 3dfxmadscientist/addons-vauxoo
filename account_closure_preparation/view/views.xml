<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="account_closure_preparation_view" model="ir.ui.view">
            <field name="name">Closure Preparation</field>
            <field name="model">account.closure.preparation</field>
            <field name="arch" type="xml">
                <form string="Closure Preparation" version="7.0">
                    <header>
                        <button 
                            name="back_pedal" 
                            type="object" 
                            string="Back Pedal" 
                            states="stage1,stage2,stage3,stage4,stage5,stage6,stage7,stage8,stage9,stage10,stage11,stage12,stage13,stage14,stage15,stage16,stage17,stage18" 
                            class="oe_highlight"/>
                        <button 
                            name="prepare_chart" 
                            type="object" 
                            string="Proceed" 
                            states="stage1,stage2,stage3,stage4,stage5,stage6,stage7,stage8,stage9,stage10,stage11,stage12,stage13,stage14,stage15,stage16,stage17,stage18" 
                            class="oe_highlight"/>
                        <field name="state" 
                            widget="statusbar" 
                            statusbar_visible="stage1,stage2,stage3,stage4,stage5,stage6,stage7,stage8,stage9,stage10,stage11,stage12,stage13,stage14,stage15,stage16,stage17,stage18"
                            statusbar_colors="{&quot;stage1&quot;:&quot;blue&quot;,&quot;confirmed&quot;:&quot;green&quot;,&quot;done&quot;:&quot;red&quot;}"/>
                    </header>
                    <!-- ELEMENTS VISIBLE ONLY IN STAGE1 Y STAGE2-->
                    <group string='Setting the Chart of Accounts' attrs="{'invisible':[('state','not in',('stage1','stage2'))]}">
                        <group colspan='4' attrs="{'invisible':[('state','not in',('stage1','stage2'))]}">
                            <h4><label colspan='4' string="Let us configure properly your Chart of Account so when closing your next Fiscal Year it will yield meaninful values in your Inicial Balance Entry" attrs="{'invisible':[('state','not in',('stage1','stage2'))]}"/></h4>
                        </group>
                        <label colspan='2' string="Set the company to which a Chart of Account is going to be configured" attrs="{'invisible':[('state','not in',('stage1','stage2'))]}"/>
                        <newline attrs="{'invisible':[('state','!=','stage1')]}"/>
                        <field name='company_id' attrs="{'readonly':[('state','!=','stage1')],'invisible':[('state','not in',('stage1','stage2'))]}"/>
                        <label colspan='2' string="Select the Account which holds the Chart of Account of your Company" attrs="{'invisible':[('state','not in',('stage1','stage2'))]}"/>
                        <newline attrs="{'invisible':[('state','not in',('stage1','stage2'))]}"/>
                        <field name='root_id' attrs="{'readonly':[('state','!=','stage1')],'invisible':[('state','not in',('stage1','stage2'))]}"/>
                        <label colspan='2' string="Select an User Account Type, the User Account Type defines how an Account is treated when Closing a Fiscal Year. A User Account Type defined as 'None' should be used in the Structure of your Chart of Account, When setting 'None' to an account that account will not carry balance to next year being open, given that the Structure of the Chart of Account just summarizes the move accounts that it holds, It is advisable to create an Account User Type named 'Chart Structure' and set it with deferral method as 'None'."/>
                        <label colspan='2' string="All those account which have been wrongly set with an User Account Type with deferral method different than 'None' will be changed to the 'Closure Type' that you will set below."
                            />
                        <newline/>
                        <field name='view_ut_id' attrs="{'readonly':[('state','!=','stage1')],'invisible':[('state','not in',('stage1','stage2'))]}"/>
                    </group>

                    <!-- ELEMENTS VISIBLE ONLY IN STAGE3 Y STAGE4-->
                    <group attrs="{'invisible':[('state','not in',('stage3','stage4'))]}">
                        <group string="Balance Sheet Accounts" cols="2" attrs="{'invisible':[('state','not in',('stage3','stage4'))]}">
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage3','stage4'))]}">
                                <h4><label colspan='4' string="Let us now prepare your Balance Sheet Accounts, Move Accounts in your Balance Sheet. All your Move Accounts in your Balance Sheet should not have an Account User Type with deferral method equal to 'None', due to the fact that an account with an Account User Type having a Deferral Method equal to 'None' will not carry values to next Fiscal Year prompting errors and yielding unexpected outcomes" attrs="{'invisible':[('state','not in',('stage3','stage4'))]}"/></h4>
                            </group>
                            <label colspan='2' string="Set the Account User Type, BS Closure Type, that will be used to Fix those accounts which are found to be set with deferral method 'None'. It could be advisable to create an Account User Type named 'BS Accounts' of generic use and deferral method equal to 'Balance', at least, all your Account in the Balance Sheet should carry the balance to the next Fiscal Year. There are other deferral methods: 'Unreconciled' which carries all unreconciled Account Entries for those account checked with attribute 'Reconcile', and 'Detail' which carries all Account Entries to the Opening Balance in the next Fiscal Year, this type could be handy for loans and mortgages" attrs="{'invisible':[('state','not in',('stage3','stage4'))]}"/>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage3','stage4'))]}">
                                <h5><label colspan='2' string="Your Balance Sheet Accounts should bear 'Assets', 'Liabilities' &amp; 'Equity'" attrs="{'invisible':[('state','not in',('stage3','stage4'))]}"/></h5>
                            </group>
                        </group>
                        <group cols="2" attrs="{'invisible':[('state','not in',('stage3','stage4'))]}">
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage3','stage4'))]}">
                                <field name='bs_ut_id' attrs="{'readonly':[('state','!=','stage3')],'invisible':[('state','not in',('stage3','stage4'))]}"/>
                            </group>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage3','stage4'))]}">
                                <field name='bs_ids' nolabel="1" attrs="{'readonly':[('state','!=','stage3')],'invisible':[('state','not in',('stage3','stage4'))]}">
                                    <tree>
                                        <field name='code'/>
                                        <field name='name'/>
                                    </tree>
                                </field>
                            </group>
                        </group>
                    </group>

                    <!-- ELEMENTS VISIBLE ONLY IN STAGE5 Y STAGE6-->
                    <group attrs="{'invisible':[('state','not in',('stage5','stage6'))]}">
                        <group string="Income Statement Accounts" cols="2" attrs="{'invisible':[('state','not in',('stage5','stage6'))]}">
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage5','stage6'))]}">
                                <h4><label colspan='4' string="Now you are going to be asked about your Income Stament part of your Chart of Account. It is wide known that all Income Statement Values are not transferred to next Fiscal Year. Each Year Income Statement Accounts Begin with zero (0) Values to be filled throughout the whole Fiscal Year and then be cleaned slate again at the end of the Fiscal Year. So Your Income Statemente Accounts should have an Account User Type with deferral method equal to 'None'" attrs="{'invisible':[('state','not in',('stage5','stage6'))]}"/></h4>
                            </group>
                            <label colspan='2' string="Set the Account User Type, IS Closure Type, that will be used to Fix those accounts which are found to be set with deferral method different than 'None'. It could be advisable to create an Account User Type named 'IS Accounts' of generic use and deferral method equal to 'None'" attrs="{'invisible':[('state','not in',('stage5','stage6'))]}"/>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage5','stage6'))]}">
                                <h5><label colspan='2' string="Your Income Statement Accounts should bear 'Income', 'Costs' &amp; 'Expenses'" attrs="{'invisible':[('state','not in',('stage5','stage6'))]}"/></h5>
                            </group>
                        </group>
                        <group cols="2" attrs="{'invisible':[('state','not in',('stage5','stage6'))]}">
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage5','stage6'))]}">
                                <field name='is_ut_id' attrs="{'readonly':[('state','!=','stage5')],'invisible':[('state','not in',('stage5','stage6'))]}"/>
                            </group>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage5','stage6'))]}">
                                <field name='is_ids' nolabel="1" attrs="{'readonly':[('state','!=','stage5')],'invisible':[('state','not in',('stage5','stage6'))]}">
                                    <tree>
                                        <field name='code'/>
                                        <field name='name'/>
                                    </tree>
                                </field>
                            </group>
                        </group>
                    </group>

                    <!-- ELEMENTS VISIBLE ONLY IN STAGE7 Y STAGE8-->
                    <group attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}">
                        <group string="Bank &amp; Cash Accounts" cols="2" attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}">
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}">
                                <h4><label colspan='4' string="We are not yet done! Let us keep moving! Our Bank &amp; Cash Accounts need special treatment. We are going to clean the Chart of Account up." attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}"/></h4>
                            </group>
                            <label colspan='2' string="All your Bank &amp; Cash Accounts should be set to an Account User Type that bears deferral method 'Balance', None of your Bank &amp; Cash Accounts should be different than that." attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}"/>
                            <label colspan='2' string="Please Fill the Field For the 'Bank Closure Type', it is advisable that you create your own Account User Type named as 'Banks' having deferral method 'Balance'" attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}"/>
                            <label colspan='2' string="And it is mandatory that you fill the field in the right with the parent accounts that hold your Bank &amp; Cash Accounts" attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}"/>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}">
                                <h5><label colspan='2' string="All those accounts, that are within the realm of the Holding Accounts you have set in the field at the right and, have wrongly set attributes like having an Account User Type of deferral method different than 'Balance' or have being set with 'type' different than 'Liquidity' will get fixed by setting their Account User Type to the one you have set in 'Bank Closure Type' and will get the 'type' attribute set to 'Liquidity'" attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}"/></h5>
                            </group>
                        </group>
                        <group cols="2" attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}">
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}">
                                <field name='bk_ut_id' attrs="{'readonly':[('state','!=','stage7')],'invisible':[('state','not in',('stage7','stage8','stage9'))]}"/>
                            </group>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}">
                                <field name='bk_ids' nolabel="1" attrs="{'readonly':[('state','!=','stage7')],'invisible':[('state','not in',('stage7','stage8','stage9'))]}">
                                    <tree>
                                        <field name='code'/>
                                        <field name='name'/>
                                    </tree>
                                </field>
                            </group>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}">
                                <h5><label colspan='2' string="It is likely wrongly set Accounts got attribute 'Liquidity' Type, Be warned that you should address this issue before proceding With 'Fix not Bank Acc' step. Check that those Accounts being presented to you are really not 'Liquidity' Type or if that was a mistake and those Accounts should be part of your Bank &amp; Cash Accounts then back-pedal and include their parents in the 'Prep Bank Acc' step. In the event that you proceed ahead with 'Fix not Bank Acc' step then those Accounts will get the 'Regular' Type attribute." attrs="{'invisible':[('state','not in',('stage7','stage8','stage9'))]}"/></h5>
                            </group>
                        </group>
                    </group>

                    <!-- ELEMENTS VISIBLE ONLY IN STAGE10 TO STAGE12-->
                    <group attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}">
                        <group string="Receivable Accounts" cols="2" attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}">
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}">
                                <h4><label colspan='4' string="There a few more steps to go, and this step is one of the most important. In OpenERP, the Accounts regarding to your customers must be treated in a special way when their Values are transferred from a Ending Fiscal Year to Opening Fiscal Year. It is to be noticed that each Receivable Entry Line is part of a cycle, when an Customer Invoice opens it creates Receivable Entry Lines, opening the cycle, when Customer pays the Invoice the cycle is closed. Closing cycles is called 'Reconciling Entries' and doing it properly is very important due to the fact that only Open Cycles, or Non-Reconciled or Partially Reconciled Entry Lines are transferred to the next Fiscal Year to be opened." attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}"/></h4>
                            </group>
                            <label colspan='2' string="All your Receivable Accounts should be set to an Account User Type that bears deferral method 'Unreconciled', None of your Receivable Accounts should be different than that." attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}"/>
                            <label colspan='2' string="Please Fill the Field For the 'Receivable Closure Type', it is advisable that you create your own Account User Type named as 'Receivable' having deferral method 'Unreconciled'. It is mandatory that you fill the field in the right with the parent accounts that hold your Receivable Accounts" attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}"/>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}">
                                <h5><label colspan='2' string="All those accounts, that are within the realm of the Holding Accounts you have set in the field at the right and, have wrongly set attributes like having an Account User Type of deferral method different than 'Balance' or have being set with 'type' different than 'Liquidity' will get fixed by setting their Account User Type to the one you have set in 'Bank Closure Type' and will get the 'type' attribute set to 'Liquidity'" attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}"/></h5>
                            </group>
                        </group>
                        <group cols="2" attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}">
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}">
                                <field name='rec_ut_id' attrs="{'readonly':[('state','!=','stage10')],'invisible':[('state','not in',('stage10','stage11','stage12'))]}"/>
                            </group>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}">
                                <field name='rec_ids' nolabel="1" attrs="{'readonly':[('state','!=','stage10')],'invisible':[('state','not in',('stage10','stage11','stage12'))]}">
                                    <tree>
                                        <field name='code'/>
                                        <field name='name'/>
                                    </tree>
                                </field>
                            </group>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}">
                                <h4><label colspan='4' string="Receivable Accounts are not transferred as 'Balance'. It means that for the Opening Journal Entries there will be lots of Receivable Entry Lines, it is Ok, these Lines are from the Open Cycles, these Entry Lines will be the basis for Aged Accounting Reports, Due Reports, etc. The Entry Lines created in the Opening Period will bear the date when they were created in the Ending Fiscal Year. It is advisable that you perform as much reconciliation as possible on your Receivable Accounts before Closing a Fiscal Year in order to avoid unnecessary transactions in the Opening Journal Entries" attrs="{'invisible':[('state','not in',('stage10','stage11','stage12'))]}"/></h4>
                            </group>
                        </group>
                    </group>

                    <!-- ELEMENTS VISIBLE ONLY IN STAGE13 TO STAGE15-->
                    <group attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}">
                        <group string="Payable Accounts" cols="2" attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}">
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}">
                                <h4><label colspan='4' string="You are done with Receivable Accounts, Payable account is not different than that. In OpenERP, the Accounts regarding to your Suppliers must be treated in a special way when their Values are transferred from a Ending Fiscal Year to Opening Fiscal Year. It is to be noticed that each Payable Entry Line is part of a cycle, when an Supplier Invoice opens it creates Payable Entry Lines, opening the cycle, when the Supplier Invoice is paid  the cycle is closed. Closing cycles is called 'Reconciling Entries' and doing it properly is very important due to the fact that only Open Cycles, or Non-Reconciled or Partially Reconciled Entry Lines are transferred to the next Fiscal Year to be opened." attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}"/></h4>
                            </group>
                            <label colspan='2' string="All your Payable Accounts should be set to an Account User Type that bears deferral method 'Unreconciled', None of your Payable Accounts should be different than that." attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}"/>
                            <label colspan='2' string="Please Fill the Field For the 'Payable Closure Type', it is advisable that you create your own Account User Type named as 'Payable' having deferral method 'Unreconciled'. It is mandatory that you fill the field in the right with the parent accounts that hold your Payable Accounts" attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}"/>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}">
                                <h5><label colspan='2' string="All those accounts, that are within the realm of the Holding Accounts you have set in the field at the right and, have wrongly set attributes like having an Account User Type of deferral method different than 'Balance' or have being set with 'type' different than 'Liquidity' will get fixed by setting their Account User Type to the one you have set in 'Bank Closure Type' and will get the 'type' attribute set to 'Liquidity'" attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}"/></h5>
                            </group>
                        </group>
                        <group cols="2" attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}">
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}">
                                <field name='pay_ut_id' attrs="{'readonly':[('state','!=','stage13')],'invisible':[('state','not in',('stage13','stage14','stage15'))]}"/>
                            </group>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}">
                                <field name='pay_ids' nolabel="1" attrs="{'readonly':[('state','!=','stage13')],'invisible':[('state','not in',('stage13','stage14','stage15'))]}">
                                    <tree>
                                        <field name='code'/>
                                        <field name='name'/>
                                    </tree>
                                </field>
                            </group>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}">
                                <h4><label colspan='4' string="Payable Accounts are not transferred as 'Balance'. It means that for the Opening Journal Entries there will be lots of Payable Entry Lines, it is Ok, these Lines are from the Open Cycles, these Entry Lines will be the basis for Aged Accounting Reports, Due Reports, etc. The Entry Lines created in the Opening Period will bear the date when they were created in the Ending Fiscal Year. It is advisable that you perform as much reconciliation as possible on your Payable Accounts before Closing a Fiscal Year in order to avoid unnecessary transactions in the Opening Journal Entries" attrs="{'invisible':[('state','not in',('stage13','stage14','stage15'))]}"/></h4>
                            </group>
                        </group>
                    </group>

                    <!-- ELEMENTS VISIBLE ONLY IN STAGE16 TO STAGE17-->
                    <group attrs="{'invisible':[('state','not in',('stage16','stage17','stage18'))]}">
                        <group string="Reconcilable Accounts" cols="2" attrs="{'invisible':[('state','not in',('stage16','stage17','stage18'))]}">
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage16','stage17','stage18'))]}">
                                <h4><label colspan='4' string="A few more steps and we are almost done!. Now it is time to configure all those accounts that are Reconcilable though they are not Receivable or Payable Accounts. This kind of Accounts are useful when you want to keep track of Mortgages or Loans, and you want that Open cycles regarding these Accounts be kept in the Opening Journal Entries in the next Fiscal Year, this way when you ask for a General Ledger you can retrieve those Entry Lines in the Opening Period in the next Fiscal Year." attrs="{'invisible':[('state','not in',('stage16','stage17','stage18'))]}"/></h4>
                            </group>
                            <label colspan='2' string="Like Payable &amp; Receivable Accounts, All your Reconcilable Accounts should be set to an Account User Type that bears deferral method 'Unreconciled', None of your Reconcilable Accounts should be different than that." attrs="{'invisible':[('state','not in',('stage16','stage17','stage18'))]}"/>
                            <label colspan='2' string="Please Fill the Field For the 'Reconcilable Closure Type', it is advisable that you create your own Account User Type named as 'Reconcilable' having deferral method 'Unreconciled'. It is mandatory that you fill the field in the right with the accounts that are your Reconcilable Accounts" attrs="{'invisible':[('state','not in',('stage16','stage17','stage18'))]}"/>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage16','stage17','stage18'))]}">
                                <h5><label colspan='2' string="All those accounts that you have regarded as Reconcilable Accounts will be set with attribute 'Reconcile', 'Regular' type and the Account User Type 'Reconcilable Closure Type' other Balance Sheet Accounts that have not previously configured will be set as not 'Reconcile', 'Regular' type and 'BS Closure Type' as an Balance Sheet Account" attrs="{'invisible':[('state','not in',('stage16','stage17','stage18'))]}"/></h5>
                            </group>
                        </group>
                        <group cols="2" attrs="{'invisible':[('state','not in',('stage16','stage17','stage18'))]}">
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage16','stage17','stage18'))]}">
                                <field name='recon_ut_id' attrs="{'readonly':[('state','!=','stage16')],'invisible':[('state','not in',('stage16','stage17','stage18'))]}"/>
                            </group>
                            <group colspan='4' attrs="{'invisible':[('state','not in',('stage16','stage17','stage18'))]}">
                                <field name='recon_ids' nolabel="1" attrs="{'readonly':[('state','!=','stage16')],'invisible':[('state','not in',('stage16','stage17','stage18'))]}">
                                    <tree>
                                        <field name='code'/>
                                        <field name='name'/>
                                    </tree>
                                </field>
                            </group>
                        </group>
                    </group>

                    <group attrs="{'invisible':[('state','not in',('stage2','stage4','stage6','stage8','stage9','stage11','stage12','stage14','stage15','stage17','stage18'))]}">
                        <field name='account_ids' nolabel="1" attrs="{'readonly':True, 'invisible':[('state','not in',('stage2','stage4','stage6','stage8','stage9','stage11','stage12','stage14','stage15','stage17','stage18'))]}">
                            <tree>
                                <field name='code'/>
                                <field name='name'/>
                            </tree>
                        </field>
                    </group>
                </form>
            </field>
        </record>
    </data>
</openerp>
